openapi: 3.0.0
info:
  version: 1.0.0
  title: NYC Benefits Eligibility API Documentation
  description: This is the documentation for the NYC Benefits Eligibility API. Below are the available endpoints to retrieve eligible program responses.
  termsOfService: http://localhost:3000/#terms-of-service
tags:
  - name: Cognito User Pool Authorization API
  - name: Eligibility Screening API
servers:
  - url: https://{endpoint-staging}
  - url: https://{endpoint-prod}
paths:
  /authToken:
    post:
      tags:
        - Cognito User Pool Authorization API
      description: >
       The Cognito User Pool Authorization API will be used by the user pool client to get auth token from Cognito. The auth token must be provided in the request header of the eligibility and bulk submission APIs to make an authenticated request. When used for the Eligibility Screening and Bulk Submission APIs, the Cognito Auth API will use the format required to exchange authentication credentials for an access token.
      requestBody:
        description: Request body of the cognito user pool authorization API
        required: true
        content:
          application/json:
            schema:
              required:
                - username
                - password
              properties:
                username:
                 type: string
                 description: Username of the Cognito user pool
                 example: testuser01
                password:
                 type: string
                 description: Temporary password of the Cognito user pool received by the user that must be passed only while doing first time authentication
                 example: temp@123
                newPassword:
                 type: string
                 description: New password of the Cognito user pool that must be set only while doing first time authentication. Second time onward, the newly set password must be provided in the password field.
                 example: new@123 
      responses:
        '200':
          description: Success Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: SUCCESS
                  token:
                    type: string
                    example: eyJraWQiOiJZeVFQOEcrSGVCaEdHR01
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: username is required.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: any.required
                            elementPath:
                              type: string
                              example: username
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The requested operation failed because a
                                resource associated with the request could not
                                be found.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: notFound
                            elementPath:
                              type: string
                              example: null
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The HTTP method associated with the request is
                                not supported.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: httpMethodNotAllowed
                            elementPath:
                              type: string
                              example: null
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The content type of the request data is not
                                supported.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: unsupportedContentType
                            elementPath:
                              type: string
                              example: null
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: The request failed due to an internal error.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: internalServerError
                            elementPath:
                              type: string
                              example: null
  /eligibilityPrograms:
    post:
      tags:
        - Eligibility Screening API
      description: >
        The eligibility API will be used for public benefits eligibility
        screening and is based on the existing eligibility rules engine of
        ACCESS NYC web portal. The API accepts dozens of pieces of information, such as a person’s marital status or income, and returns a list of potential eligible government programs for which the resident can apply for.
      parameters:
        - name: interestedPrograms
          in: query
          required: false
          description: >
            Comma-separated list of program codes a user is interested in. It
            will be used for filtering the program codes returned by the
            eligibility API to show only the eligible program codes a user is
            interested in. Program codes should always be passed in upper case.
          schema:
            type: string
        - in: header
          name: Authorization
          schema:
            type: string
          description: >
            User has to pass the auth token received from the AWS Cognito User Pool Authorization API
          required: true
        - in: header
          name: username
          description: >
            Username of the Cognito user pool
          schema:
            type: string
          required: true
      requestBody:
        description: Request body of the eligibility API
        required: true
        content:
          application/json:
            schema:
              required:
                - commands
              properties:
                commands:
                  type: array
                  items:
                    oneOf:
                      - type: object
                        properties:
                          insert:
                            type: object
                            properties:
                              object:
                                type: object
                                properties:
                                  accessnyc.request.Household:
                                    type: object
                                    required:
                                      - members
                                    properties:
                                      caseId:
                                        type: string
                                        description: Concatenation of alphanumeric fields, potentially separated by dashes, periods, or slashes, used by agencies to identify unique submissions
                                        example: caseId01
                                      zip:
                                        type: string
                                        description: Supports only valid NYC zip codes. Supported format - nnnnn, where n is a number
                                        example: 10314
                                      city:
                                        type: string
                                        description: For New York City, the supported value is NYC
                                        example: NYC
                                      members:
                                        type: number
                                        minimum: 0
                                        maximum: 8
                                        description: Number of individuals in the household
                                        example: 1
                                      cashOnHand:
                                        type: string
                                        description: Numeric monetary(USD) value that the household has on hand. Supports numeric and a decimal. Characteristic will be min 1 and max 7 in length, and mantissa will be min 1 and max 2
                                        example: 5000
                                      livingRentalType:
                                        type: string
                                        description: Type of rental the user lives in. Supported types - NYCHA, MarketRate, RentControlled, RentRegulatedHotel, Section213, LimitedDividendDevelopment, MitchellLama, RedevelopmentCompany, HDFC, FamilyHome, Condo
                                        example: NYCHA
                                      livingRenting:
                                        type: boolean
                                        description: House or apartment on rent
                                      livingOwner:
                                        type: boolean
                                        description: Household member owns the home or apartment
                                      livingStayingWithFriend:
                                        type: boolean
                                        description: Staying with a friend
                                      livingHotel:
                                        type: boolean
                                        description: Staying in a hotel
                                      livingShelter:
                                        type: boolean
                                        description: Staying in a shelter or homeless
                                      livingPreferNotToSay:
                                        type: boolean
                                        description: Prefer not to say
                      - type: object
                        properties:
                          insert:
                            type: object
                            properties:
                              object:
                                type: object
                                properties:
                                  accessnyc.request.Person:
                                    type: object
                                    properties:
                                      age:
                                        type: number
                                        minimum: 1
                                        maximum: 999
                                        description: Age of the user or household members. Supports numeric
                                        example: 20
                                      applicant:
                                        type: boolean
                                        description: Is the person the applicant?
                                      student:
                                        type: boolean
                                        description: Student
                                      studentFulltime:
                                        type: boolean
                                        description: Full time student
                                      pregnant:
                                        type: boolean
                                        description: Pregnant
                                      unemployed:
                                        type: boolean
                                        description: Unemployed
                                      unemployedWorkedLast18Months:
                                        type: boolean
                                        description: Worked in last 18 months
                                      blind:
                                        type: boolean
                                        description: Blind or visually impaired
                                      disabled:
                                        type: boolean
                                        description: Disabilities
                                      veteran:
                                        type: boolean
                                        description: Served in U.S. Armed Forces, National Guard or Reserves
                                      benefitsMedicaid:
                                        type: boolean
                                        description: Medicaid
                                      benefitsMedicaidDisability:
                                        type: boolean
                                        description: Disability related medicaid  
                                      headOfHousehold:
                                        type: boolean
                                        description: Head of the household
                                      headOfHouseholdRelation:
                                        type: string
                                        description: Person’s relationship to the head of the household. Supported values - Child, FosterChild, StepChild, Grandchild, Spouse, Parent, FosterParent, StepParent, Grandparent, SisterBrother, StepSisterStepBrother, BoyfriendGirlfriend, DomesticPartner, Unrelated, Other
                                        example: Child
                                      livingOwnerOnDeed:
                                        type: boolean
                                        description: Is the person the owner?
                                      livingRentalOnLease:
                                        type: boolean
                                        description: Is the person on the lease?
                                      incomes:
                                        type: array
                                        items:
                                          type: object
                                          required:
                                            - amount
                                          properties:
                                            amount:
                                              type: string
                                              description: Amount the user receives for the type of income. Supports only numeric and a decimal. Characteristic will be min 0 and max 6 in length. Mantissa will be min 1 and max 2
                                              example: 2000
                                            frequency:
                                              type: string
                                              description: How often does the user receives the income? Supported values - weekly, biweekly, monthly, semimonthly, yearly
                                              example: monthly
                                            type:
                                              type: string
                                              example: Wages
                                              description: Income source. Supported values - Wages, SelfEmployment, Unemployment, CashAssistance, ChildSupport, DisabilityMedicaid, SSI, SSDependent, SSDisability, SSSurvivor, SSRetirement, NYSDisability, Veteran, Pension, DeferredComp, WorkersComp, Alimony, boarder, Gifts, Rental, Investment
                                      expenses:
                                        type: array
                                        items:
                                          type: object
                                          properties:
                                            amount:
                                              type: string
                                              description: Amount the user receives for the type of income. Supports only numeric and a decimal. Characteristic will be min 0 and max 6 in length. Mantissa will be min 1 and max 2
                                              example: 300
                                            frequency:
                                              type: string
                                              description: How often does the user have the expense? Supported values - weekly, biweekly, monthly, semimonthly, yearly
                                              example: monthly
                                            type:
                                              type: string
                                              description: Type of expense. Supported values - ChildCare, ChildSupport, DependentCare, Rent, Medical, Heating, Cooling, Mortgage, Utilities, Telephone, InsurancePremiums
                                              example: Rent
      responses:
        '200':
          description: Success Response
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: SUCCESS
                  eligiblePrograms:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            code:
                              type: string
                              example: SR2019
                            name:
                              type: string
                              example: Health Insurance
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: cashOnHand has invalid format.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: string.base.regex
                            elementPath:
                              type: string
                              example: >-
                                commands.0.insert.object.accessnyc.request.Household.cashOnHand
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The requested operation failed because a
                                resource associated with the request could not
                                be found.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: notFound
                            elementPath:
                              type: string
                              example: null
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The HTTP method associated with the request is
                                not supported.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: httpMethodNotAllowed
                            elementPath:
                              type: string
                              example: null
        '406':
          description: Not Acceptable
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The content type of the request data is not
                                supported.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: unsupportedContentType
                            elementPath:
                              type: string
                              example: null
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: The request failed due to an internal error.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: internalServerError
                            elementPath:
                              type: string
                              example: null
        '504':
          description: Gateway Timeout
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The request has been timed out. Please try
                                again.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: gatewayTimeout
                            elementPath:
                              type: string
                              example: null
  /bulkSubmission/import:
    post:
      tags:
        - Eligibility API
      description: The bulk submission API will be provisioned to accept a structured CSV input allowing users to query for bulk requests and respond back with the collated eligibility results in a structured CSV format.
      parameters:
        - name: interestedPrograms
          in: query
          required: false
          description: >
            Comma-separated list of program codes a user is interested in. It
            will be used for filtering the program codes returned by the
            eligibility API to show only the eligible program codes a user is
            interested in. Program codes should always be passed in upper case.
          schema:
            type: string
        - in: header
          name: Authorization
          schema:
            type: string
          description: >
            User has to pass the auth token received from the AWS Cognito User Pool Authorization API
          required: true
        - in: header
          name: username
          description: >
            Username of the Cognito user pool
          schema:
            type: string
          required: true
      requestBody:
        description: Request body of the bulk submission API
        required: true
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                filename:
                  type: string
                  format: binary
      responses:
        '400':
          description: Bad Request
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: No file uploaded.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: NoInputFile
                            elementPath:
                              type: string
                              example: 
        '404':
          description: Not Found
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The requested operation failed because a
                                resource associated with the request could not
                                be found.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: notFound
                            elementPath:
                              type: string
                              example: null
        '405':
          description: Method Not Allowed
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The HTTP method associated with the request is
                                not supported.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: httpMethodNotAllowed
                            elementPath:
                              type: string
                              example: null
        '500':
          description: Internal Server Error
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: The request failed due to an internal error.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: internalServerError
                            elementPath:
                              type: string
                              example: null
        '504':
          description: Gateway Timeout
          content:
            application/json:
              schema:
                type: object
                properties:
                  type:
                    type: string
                    example: FAILURE
                  errors:
                    type: array
                    items:
                      oneOf:
                        - type: object
                          properties:
                            message:
                              type: string
                              example: >-
                                The request has been timed out. Please try
                                again.
                            moreInfo:
                              type: string
                              example: >-
                                See API documentation at <APIDocumentationPath>
                                for details on valid requests.
                            code:
                              type: string
                              example: gatewayTimeout
                            elementPath:
                              type: string
                              example: null
            
      
